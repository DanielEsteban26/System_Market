<Window x:Class="System_Market.Views.ReportesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Reportes" Height="756" Width="1100" WindowStartupLocation="CenterScreen"
        Background="#0B5A68" FontFamily="Segoe UI">
    <Window.Resources>
        <!-- Sombras reutilizables -->
        <DropShadowEffect x:Key="BtnDefaultShadow" Color="#000000" BlurRadius="4" ShadowDepth="1" Opacity="0.18"/>
        <DropShadowEffect x:Key="BtnHoverShadow" Color="#000000" BlurRadius="10" ShadowDepth="2" Opacity="0.30"/>

        <!-- Estilo PRIMARY sin ControlTemplate para evitar errores del diseñador -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#0EA5B7"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Effect" Value="{StaticResource BtnDefaultShadow}"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#0BA8AE"/>
                    <Setter Property="Effect" Value="{StaticResource BtnHoverShadow}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#08939A"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.6"/>
                    <Setter Property="Cursor" Value="Arrow"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Estilo SECONDARY sin ControlTemplate -->
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="#8B5CF6"/>
            <Setter Property="MinWidth" Value="130"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#7A46E0"/>
                    <Setter Property="Effect" Value="{StaticResource BtnHoverShadow}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#6736C8"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- CardBorder y otros recursos existentes -->
        <Style x:Key="CardBorder" TargetType="Border">
            <Setter Property="Background" Value="#10343D"/>
            <Setter Property="CornerRadius" Value="8"/>
            <!-- Padding reducido para tarjetas más compactas -->
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="12"/>
            <!-- MinHeight reducido -->
            <Setter Property="MinHeight" Value="150"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" BlurRadius="6" ShadowDepth="2" Opacity="0.25"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <DockPanel Margin="0,0,0,34">
        <!-- Área desplazable con tarjetas -->
        <ScrollViewer VerticalScrollBarVisibility="Auto" DockPanel.Dock="Top" Height="596">
            <StackPanel Margin="28">
                <UniformGrid Rows="2" Columns="3" HorizontalAlignment="Stretch" VerticalAlignment="Top">
                    <!-- Productos -->
                    <Border Style="{StaticResource CardBorder}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <!-- altura más compacta -->
                                <RowDefinition Height="90"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="Productos" FontSize="18" Foreground="White" Margin="0,0,0,8" FontWeight="Bold"/>

                            <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,6,0,6">
                                <CheckBox x:Name="chkIncluirAgotados" Content="Incluir agotados" Foreground="White" Margin="0,0,8,0"/>
                            </StackPanel>

                            <WrapPanel Grid.Row="2" Margin="0,6,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" ItemWidth="Auto">
                                <Button x:Name="BtnExportarProductosExcel" Style="{StaticResource PrimaryButton}" Content="Exportar EXCEL" Click="BtnExportarProductosExcel_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarProductosPdf" Style="{StaticResource SecondaryButton}" Content="Exportar PDF" Click="BtnExportarProductosPdf_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarProductosGrafico" Style="{StaticResource PrimaryButton}" Content="Exportar gráfico" Click="BtnExportarProductosGrafico_Click" Margin="0,0,10,8"/>
                            </WrapPanel>
                        </Grid>
                    </Border>

                    <!-- Historial de Compras -->
                    <Border Style="{StaticResource CardBorder}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="90"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="Historial de Compras" FontSize="18" Foreground="White" Margin="0,0,0,8" FontWeight="Bold"/>

                            <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,6,0,6">
                                <ComboBox x:Name="cbRangoCompras" Width="140" SelectionChanged="CbRangoCompras_SelectionChanged" Margin="0,0,10,0">
                                    <ComboBoxItem Tag="ULT7">Últimos 7 días</ComboBoxItem>
                                    <ComboBoxItem Tag="HOY">Hoy</ComboBoxItem>
                                    <ComboBoxItem Tag="MES">Mes</ComboBoxItem>
                                    <ComboBoxItem Tag="PERS">Personalizado</ComboBoxItem>
                                </ComboBox>
                                <DatePicker x:Name="dpDesdeCompras" Width="140" Margin="0,0,10,0" Padding="4,2,28,2" HorizontalAlignment="Left"/>
                                <DatePicker x:Name="dpHastaCompras" Width="140" Margin="0,0,10,0" Padding="4,2,28,2" HorizontalAlignment="Left"/>
                            </StackPanel>

                            <WrapPanel Grid.Row="2" Margin="0,6,0,0" HorizontalAlignment="Left" ItemWidth="Auto">
                                <Button x:Name="BtnExportarComprasExcel" Style="{StaticResource PrimaryButton}" Content="Exportar EXCEL" Click="BtnExportarComprasExcel_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarComprasPdf" Style="{StaticResource SecondaryButton}" Content="Exportar PDF" Click="BtnExportarComprasPdf_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarComprasGrafico" Style="{StaticResource PrimaryButton}" Content="Exportar gráfico" Click="BtnExportarComprasGrafico_Click" Margin="0,0,10,8"/>
                            </WrapPanel>
                        </Grid>
                    </Border>

                    <!-- Proveedores -->
                    <Border Style="{StaticResource CardBorder}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="90"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Row="0">
                                <TextBlock Text="Proveedores" FontSize="18" Foreground="White" Margin="0,0,0,8" FontWeight="Bold"/>
                                <TextBlock Text="Exportar listado o gráfico (sin filtros)" Foreground="#BFE8EB" Margin="0,0,0,6"/>
                            </StackPanel>

                            <WrapPanel Grid.Row="2" Margin="0,6,0,0" HorizontalAlignment="Left" ItemWidth="Auto">
                                <Button x:Name="BtnExportarProveedoresExcel" Style="{StaticResource PrimaryButton}" Content="Exportar EXCEL" Click="BtnExportarProveedoresExcel_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarProveedoresGrafico" Style="{StaticResource PrimaryButton}" Content="Exportar gráfico" Click="BtnExportarProveedoresGrafico_Click" Margin="0,0,10,8"/>
                            </WrapPanel>
                        </Grid>
                    </Border>

                    <!-- Historial de Ventas -->
                    <Border Style="{StaticResource CardBorder}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="90"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="Historial de Ventas" FontSize="18" Foreground="White" Margin="0,0,0,8" FontWeight="Bold"/>

                            <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,6,0,6">
                                <ComboBox x:Name="cbRangoVentas" Width="140" SelectionChanged="CbRangoVentas_SelectionChanged" Margin="0,0,10,0">
                                    <ComboBoxItem Tag="ULT7">Últimos 7 días</ComboBoxItem>
                                    <ComboBoxItem Tag="HOY">Hoy</ComboBoxItem>
                                    <ComboBoxItem Tag="MES">Mes</ComboBoxItem>
                                    <ComboBoxItem Tag="PERS">Personalizado</ComboBoxItem>
                                </ComboBox>
                                <DatePicker x:Name="dpDesdeVentas" Width="140" Margin="0,0,10,0" Padding="4,2,28,2" HorizontalAlignment="Left"/>
                                <DatePicker x:Name="dpHastaVentas" Width="140" Margin="0,0,10,0" Padding="4,2,28,2" HorizontalAlignment="Left"/>
                            </StackPanel>

                            <WrapPanel Grid.Row="2" Margin="0,6,0,0" HorizontalAlignment="Left" ItemWidth="Auto">
                                <Button x:Name="BtnExportarVentasExcel" Style="{StaticResource PrimaryButton}" Content="Exportar EXCEL" Click="BtnExportarVentasExcel_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarVentasPdf" Style="{StaticResource SecondaryButton}" Content="Exportar PDF" Click="BtnExportarVentasPdf_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarVentasGrafico" Style="{StaticResource PrimaryButton}" Content="Exportar gráfico" Click="BtnExportarVentasGrafico_Click" Margin="0,0,10,8"/>
                            </WrapPanel>
                        </Grid>
                    </Border>

                    <!-- Categorías -->
                    <Border Style="{StaticResource CardBorder}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="90"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Row="0">
                                <TextBlock Text="Categorías" FontSize="18" Foreground="White" Margin="0,0,0,8" FontWeight="Bold"/>
                                <TextBlock Text="Listado completo o gráfico (sin filtros)" Foreground="#BFE8EB" Margin="0,0,0,6"/>
                            </StackPanel>

                            <WrapPanel Grid.Row="2" Margin="0,6,0,0" HorizontalAlignment="Left" ItemWidth="Auto">
                                <Button x:Name="BtnExportarCategoriasExcel" Style="{StaticResource PrimaryButton}" Content="Exportar EXCEL" Click="BtnExportarCategoriasExcel_Click" Margin="0,0,10,8"/>
                                <Button x:Name="BtnExportarCategoriasGrafico" Style="{StaticResource PrimaryButton}" Content="Exportar gráfico" Click="BtnExportarCategoriasGrafico_Click" Margin="0,0,10,8"/>
                            </WrapPanel>
                        </Grid>
                    </Border>

                    <!-- Resumen (fuentes reducidas para caber mejor) -->
                    <Border Style="{StaticResource CardBorder}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="90"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Row="0">
                                <TextBlock Text="Resumen" FontSize="18" Foreground="White" Margin="0,0,0,6" FontWeight="Bold"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Orientation="Vertical">
                                        <TextBlock Text="Ventas:" Foreground="#BFE8EB" FontSize="11"/>
                                        <TextBlock x:Name="txtVentasValor" Text="S/ 0.00" FontWeight="SemiBold" Foreground="#DFF7F9" FontSize="13" Margin="0,4,0,6"/>
                                        <TextBlock Text="Compras:" Foreground="#BFE8EB" FontSize="11"/>
                                        <TextBlock x:Name="txtComprasValor" Text="S/ 0.00" FontWeight="SemiBold" Foreground="#DFF7F9" FontSize="13" Margin="0,4,0,6"/>
                                        <TextBlock Text="Balance:" Foreground="#BFE8EB" FontSize="11"/>
                                        <TextBlock x:Name="txtBalanceValor" Text="S/ 0.00" FontWeight="SemiBold" Foreground="#DFF7F9" FontSize="13" Margin="0,4,0,0"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                        <TextBlock Text="Qué es:" Foreground="#BFE8EB" FontWeight="Bold" FontSize="11"/>
                                        <TextBlock TextWrapping="Wrap" Foreground="#BFE8EB" FontSize="11" Margin="0,6,0,0">
                                            Ventas: suma del Total de ventas en el periodo (incluye todas las ventas que devuelve el servicio).
                                            Compras: suma del Total de compras en el periodo.
                                            Balance: Ventas − Compras. No es la ganancia neta (no resta COGS ni gastos operativos). El tooltip del Balance muestra una estimación de Ganancia Bruta (Ventas − COGS).
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>

                            <Border Grid.Row="1" Background="Transparent" Margin="0,6,0,0" MinHeight="80"/>
                        </Grid>
                    </Border>
                </UniformGrid>
            </StackPanel>
        </ScrollViewer>

        <!-- Botones siempre visibles en la zona inferior -->
        <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom" HorizontalAlignment="Right" Margin="16" VerticalAlignment="Center">
            <Button x:Name="BtnHistorialCompras" Content="HISTORIAL COMPRAS" Style="{StaticResource SecondaryButton}" Width="157" Height="40" Click="BtnHistorialCompras_Click" Margin="0,0,12,0"/>
            <Button x:Name="BtnHistorialVentas" Content="HISTORIAL VENTAS" Style="{StaticResource SecondaryButton}" Width="155" Height="40" Click="BtnHistorialVentas_Click" Margin="0,0,12,0"/>
            <Button x:Name="BtnCerrar" Content="CERRAR" Style="{StaticResource SecondaryButton}" Width="120" Height="40" Click="BtnCerrar_Click"/>
        </StackPanel>
    </DockPanel>
</Window>